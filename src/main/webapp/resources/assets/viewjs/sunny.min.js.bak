(function($) {
	var project_name = "base";
	var sunny = {};
	sunny.alert = function(title, message) {
		bootbox.alert({
			buttons : {
				ok : {
					label : '关闭',
					className : 'btn-sm btn-danger'
				}
			},
			message : message,
			title : title
		});
	};

	sunny.ajax = function(opts) {
		try {
			var sunny_opts = {};
			sunny_opts.url = opts.url;
			sunny_opts.type = (opts.type == undefined) ? 'post' : opts.type;
			sunny_opts.dataType = "json";
			sunny_opts.data = {"params" : opts.params};
			sunny_opts.async = (opts.async == undefined) ? true : opts.async;

			sunny_opts.success = function(rsp) {
				 if (rsp.status_code == '600') {
					window.location.href = '/' + project_name
							+ '/login/login.html';
				}
				opts.success(rsp);
			};

			sunny_opts.error = function(rsp) {
				window.location.href = '/' + project_name + '/sys/500.html';
			};
			$.ajax(sunny_opts);
		} catch (e) {
			window.location.href = '/' + project_name + '/sys/500.html';
			return null;
		}

	};

	$.extend({
		"sunny" : sunny
	});

})(jQuery)